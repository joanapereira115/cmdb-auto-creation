
% example for dissertation.sty
\documentclass[
  % Replace oneside by twoside if you are printing your thesis on both sides
  % of the paper, leave as is for single sided prints or for viewing on screen.
  oneside,
  %twoside,
  11pt, a4paper,
  footinclude=true,
  headinclude=true,
  cleardoublepage=empty
]{scrbook}

\usepackage{dissertation}

% ----------------------------------------------------------------

% Title
\titleA{Construção Automática}
\titleB{de CMDB} % (if any)
%\subtitleA{First Part of Subtitle}
%\subtitleB{Second part of Subtitle} % (if any)

% Author
\author{Joana Catarina Maciel Pereira}

% Supervisor(s)
\supervisor{António Luís Pinto Ferreira de Sousa}
%\cosupervisor{The cosupervisor of the thesis}

% University (uncomment if you need to change default values)
% \def\school{Escola de Engenharia}
% \def\department{Departamento de Inform\'{a}tica}
% \def\university{Universidade do Minho}
% \def\masterdegree{Computer Science}

% Date
\date{\myear} % change to text if date is not today

% Keywords
%\keywords{master thesis}

% Glossaries & Acronyms
%\makeglossaries  %  either use this ...
%\makeindex	   % ... or this

% Define Acronyms
\input{sec/acronyms}
%\glsaddall[types={\acronymtype}]


\ummetadata % add metadata to the document (author, publisher, ...)

\begin{document}
	% Cover page ---------------------------------------
	\umfrontcover	
	\umtitlepage
	
	% Add acknowledgements ----------------------------
	%\chapter*{Acknowledgements}
	%Write acknowledgements here


	% Add abstracts (en,pt) ---------------------------
	\chapter*{Abstract}
Computing infrastructure management is becoming more demanding and must increasingly comply with regulatory requirements.

To meet these requirements, a \gls{cmdb} is essential. One of the challenges any team has to begin managing an existing infrastructure is building this \gls{cmdb}.

So, for an organization that already exists, it is necessary to discover its technological components. Then the collected data should be treated and stored in the \gls{cmdb} chosen by the organization. Thus, the main goal is to develop a method for automatic creation of a \gls{cmdb}, using network analysis tools, machine audits, and system inventory.

Taking into account the technology products that implement \glspl{cmdb}, it is necessary to adapt the data to the structure of this database to be used by the organization.

\vspace{1cm}
\textbf{Keywords:} \gls{cmdb}, \gls{ci}, automatic discovery.
 	
	\cleardoublepage
	\chapter*{Resumo}
A gestão de infraestruturas computacionais é cada vez mais exigente e tem de cumprir cada vez mais com requisitos normativos. 

Para estar de acordo com estes requisitos, a existência de uma \gls{cmdb} é vital. Um dos desafios que qualquer equipa tem ao iniciar a gestão de uma infraestrutura existente é a construção desta \gls{cmdb}. 

Assim, para uma organização que já exista, é necessário fazer a descoberta dos seus componentes tecnológicos e, após fazer o tratamento dos dados recolhidos, armazená-los na \gls{cmdb} escolhida pela organização. Pretende-se então com este tema, fazer a criação automática de uma \gls{cmdb}, recorrendo a ferramentas de análise de redes, de auditoria de máquinas e de inventário de sistemas. 

Tendo em conta os produtos tecnológicos que implementam \glspl{cmdb}, é necessário adaptar o povoamento de acordo com a estrutura desta base de dados a ser utilizada pela organização.

\vspace{1cm}	
\textbf{Palavras-chave:} \gls{cmdb}, \gls{ci}, descoberta automática.
	
	% Summary Lists ------------------------------------
	\tableofcontents
	%\listoffigures
	\listoftables
	%\lstlistoflistings
	%\listofabbreviations
	\printglossary[type=\acronymtype, style=treenoname]
    \clearpage
    \thispagestyle{empty}
	
	
	\pagenumbering{arabic}
	
	% CHAPTER - Introduction -------------------------
	\chapter{Introdução}
	\label{cap:introducao}
	
	\section{Contextualização}
	
Os departamentos de tecnologias da informação enfrentam vários desafios na entrega de serviços confiáveis que suportam os objetivos de negócio de uma empresa. Resolver a maioria deles requer uma boa estratégia de gestão de configurações.

O processo de gestão de configurações procura, de uma forma compreensiva e sistemática, especificar, controlar e fazer \textit{tracking} dos componentes da infraestrutura tecnológica e todas as alterações feitas a estes. De acordo com a \gls{itil} \cite{itil4}, a gestão de configurações cria um modelo da infraestrutura e dos serviços disponíveis, identificando, controlando, armazenando e verificando todos os componentes existentes nessa infraestrutura \cite{cmdb5steps}. 

A \gls{itil} é uma \textit{framework} que descreve um conjunto de práticas, instruções e recomendações que explica processos, procedimentos e tarefas para gerir os serviços de uma organização \cite{baron2010configuration}. Estes elementos não são específicos de nenhuma organização e podem ser aplicados por qualquer uma. A \gls{itil} não é um \textit{standard}, ou seja, não prescreve as práticas que descreve. As organizações não precisam de implementar cada processo ou seguir a \textit{framework} de forma rigorosa. Cada empresa pode escolher as áreas do seu negócio mais apropriadas para implementar os processos. O foco da \gls{itil} é garantir que os serviços conseguem acompanhar as necessidades do negócio, oferecendo às organizações uma oportunidade de aumentar a eficiência, melhorar a produtividade e aumentar o valor comercial.

Enquanto que as práticas \gls{itil} representam apenas recomendações, existe, desde 2005, o \textit{standard} \gls{iso} 20000 \cite{iso20000} que especifica os requisitos necessários para a gestão de serviços de uma organização. O \gls{iso} 20000 é uma evolução das práticas \gls{itil} e tem a intenção de ser compatível com estas \cite{cmdb5steps}. 

Entre outras coisas, este \textit{standard} implica a utilização de uma \gls{cmdb} que guarde todos os \glspl{ci}, que devem ser unicamente identificados, assim como o seu histórico de alterações e problemas. Adicionalmente, aumenta a satisfação geral dos clientes e trabalhadores, ao mesmo tempo que reforça a imagem corporativa das organizações.

\gls{cmdb} é uma base de dados, que segue as normas \gls{itil}, usada por uma organização para guardar informação sobre a sua infraestrutura tecnológica.

Uma das maiores tarefas da gestão de configurações passa pela identificação dos componentes da infraestrutura a guardar na \gls{cmdb}. Um dos seus principais objetivos passa por fornecer informação sobre todos os componentes e configurações na infraestrutura da empresa e os seus serviços. 
	
	\section{Motivação}
	
Os ambientes empresariais possuem infraestruturas tecnológicas complexas que são compostas por diversos componentes, que podem ser \textit{hardware}, \textit{software}, documentação ou pessoal, e que dependem entre si de várias formas. Tendo em conta a grande complexidade da infraestrutura de uma empresa, esta necessita de ferramentas de gestão mais poderosas, tais como uma \gls{cmdb} \cite{taddm}. 

A \gls{cmdb} torna-se uma ferramenta mais influente quando são adicionados mais \glspl{ci} ao sistema, porque permite manter informação sobre estes e perceber como alterações aos mesmos podem afetar os restantes componentes da infraestrutura. Para além disto, à medida que a infraestrutura se torna mais complexa, aumenta também a importância de manter informação sobre os seus componentes.

Existem diversas razões pelas quais é relevante ter informação sobre a infraestrutura da organização. Por exemplo, conhecer todos as máquinas existentes, facilita a prevenção da entrada de intrusos na rede da empresa; conhecer as dependências entre os vários componentes permite saber quais destes possuem acesso a informação sensível e previnir a sua divulgação; saber de todas as instâncias instaladas de um \textit{software} permite fazer uma melhor gestão da licença do mesmo; conhecer todos os ativos envolvidos numa tarefa e todos os seus relacionamentos, fornece um melhor planeamento de ações de recuperação e de análise relacionadas com a disponibilidade de serviços; o conhecimento detalhado dos componentes de \textit{software} e de \textit{hardware}, assim como as dependências entre si, permite a virtualização e migração de serviços e máquinas; entre outras \cite{taddm}.

No entanto, obter toda esta informação sobre os componentes da infraestrutura implica custos, principalmente se tiver de ser efetuada manualmente. Considerando as empresas já existentes, que já possuem uma estrutura mais complexa e desenvolvida, este processo torna-se ainda mais difícil. Das várias organizações que a cada ano tentam construir a sua \gls{cmdb}, cerca de 85\% falham nesta tarefa. Uma das maiores razões pela qual isto acontece recai no facto de ser uma abordagem excessivamente manual e, sem as ferramentas apropriadas, as organizações consideram que este trabalho é demasiado minucioso e demorado\cite{forbes}. Adicionalmente, a tentativa de modelar manualmente os diferentes relacionamentos entre os \glspl{ci}, é uma atividade propensa a erros. Uma boa abordagem para resolver este problema passa por obter um método que recolha informação sobre os componentes.

As ferramentas de descoberta automática são essenciais para a automatização do processo de recolha de informação para uma \gls{cmdb}. Porém, usualmente, estas ferramentas são difíceis de implementar e executar e não recolhem a quantidade e tipo de dados pretendidos \cite{taddm}. Desta forma, quem precisa destas informações acaba por implementar as suas próprias ferramentas ou realizar a descoberta manualmente. Ao longo do tempo surgiram muitas ferramentas que permitem descobrir os ativos de um sistema e as dependências entre estes. No entanto, existem alguns problemas na implementação eficaz destas ferramentas. Além disto, a descoberta das dependências relacionadas com pessoas e de informação relacionada com \textit{software à medida} torna-se uma etapa crítica, devido à especificidade deste tipo de dados. A precisão da informação obtida é também um fator essencial, pois não devem existir ativos ou dependências não descobertos. A falta de informação pode levar a que, por exemplo, processos de recuperação ou de migração acabem por falhar \cite{taddm}.

Assim, a construção de uma \gls{cmdb}, recorrendo à descoberta automática dos \glspl{ci} da infraestrutura, torna-se uma função fundamental para uma organização. O processo de descoberta deve ser o mais simples, abrangente e preciso possível, de forma a que a informação obtida seja o mais prestável possível na tomada de decisões acerca da infraestrutura, uma vez que estas decisões influenciam os resultados da organização.
	
	\section{Objetivos}
	
Os principais objetivos deste projeto passam portanto por:
\begin{itemize}
    \item Investigar as tecnologias de implementação de \gls{cmdb} e perceber como estas funcionam e como e que dados podem ser armazenados;
    \item Implementar um processo de descoberta automática dos componentes tecnológicos de uma organização recorrendo a ferramentas de análise de redes e inventário de sistemas;
    \item Fazer o tratamento dos dados recolhidos para fazer o correto povoamento e criação de uma \gls{cmdb}.
\end{itemize}
	
	\section{Organização do documento}
	
Este documento encontra-se estruturado em três capítulos:

\begin{itemize}
    \item \textbf{Capítulo 1 - Introdução:} para além de ser feito o enquadramento do projeto, são também levantados os objetivos do mesmo.
    
    \item \textbf{Capítulo 2 - Estado da Arte:} são expostos os conceitos e implementações mais relevantes acerca do tema.
    
    \item \textbf{Capítulo 3 - Trabalho Futuro:} é apresentado, de forma breve, o objetivo final a ser alcançado.
\end{itemize}


	% CHAPTER - State of the Art ---------------------
	\chapter{Estado da Arte}
	\label{cap:estadoarte}

\section{ITIL}

A \gls{itil} \cite{itil4}, atualmente na versão 4, é uma \textit{framework} que foi inicialmente desenvolvida pelo governo britânico durante os anos 80 como um conjunto de padrões para melhorar o desempenho das \gls{ti}.

Um dos componentes chave da \gls{itil} 4 é o \gls{svs}. Neste, é representada a forma como componentes e atividades diferentes podem trabalhar em conjunto, em qualquer tipo de organização, com o objetivo de facilitar a criação de valor através de serviços de \gls{ti}. Os componentes do \gls{svs} são:
\begin{itemize}
    \item \textbf{Cadeia de valor de serviço:} Conjunto de atividades realizadas por uma organização para entregar produtos ou serviços com valor aos seus clientes;
    
    \item \textbf{Práticas:} Conjunto de recursos organizacionais desenhados para executar um trabalho ou atingir um objetivo;
    
    \item \textbf{Princípios orientadores:} Recomendações capazes de orientar uma organização em todas as circunstâncias, independentemente dos seus objetivos, estratégias, tipo de trabalho ou estrutura de gestão;
    
    \item \textbf{Governança:} Sistema que que orienta e controla a organização;
    
    \item \textbf{Melhoria contínua:} Atividade organizacional recorrente que garante que o desempenho da organização continua a responder às expectativas das partes interessadas.
\end{itemize}

As práticas de gestão definidas no \gls{svs} incluem práticas gerais de gestão, práticas de gestão de serviços e práticas de gestão técnica. As práticas gerais de gestão incluem 14 práticas adotadas e adaptadas da gestão de serviços para domínios gerais de gestão de negócios. As práticas de gestão de serviços envolvem 17 práticas desenvolvidas nos setores de gestão de serviços e \gls{itsm}. Finalmente, as práticas de gestão técnica, incluem 3 práticas adaptadas dos domínios de gestão de tecnologias para fins de gestão de serviços, expandindo ou mudando o foco das soluções tecnológicas para serviços.

De entre estas, a relevante para este projeto é a prática de gestão configurações de serviços, inserida nas práticas de gestão de serviços. A prática de gestão configurações de serviços garante que a informação sobre os serviços e os \glspl{ci} que os suportam é exata e confiável e está disponível quando e onde for precisa. Isto inclui informação sobre como os \glspl{ci} estão configurados e como se relacionam entre si. Recolhe e gere informação sobre uma grande variedade de \glspl{ci}, que usualmente incluem hardware, software, redes, edifícios, pessoas, fornecedores, documentação e serviços, que são também tratados como \glspl{ci}. Esta informação pode ser guardada numa única fonte de dados (\gls{cmdb}), ou pode ser distribuída entre várias fontes.

A \gls{itil} define uma \gls{cmdb} como ``uma base de dados utilizada para guardar os detalhes dos \glspl{ci} durante o seu ciclo de vida e os relacionamentos entre estes.'' Outras conceitos relevantes no contexto de uma \gls{cmdb} são infraestrutura de \gls{ti}, gestão de configurações, \textit{\acrlong{ci}}, atributo e tipo de \gls{ci}. A infraestrutura de \gls{ti} é descrita pela \gls{itil} como ``todo o hardware, software, redes e instalações necessárias para desenvolver, testar, entregar, monitorizar, gerir e suportar serviços''. A gestão de configurações ``fornece informação sobre os CIs (...) e os seus relacionamentos: como interagem, se relacionam, e dependem uns dos outros (...). Isto inclui informação sobre as dependências entre serviços''. Um \textit{\acrlong{ci}} é ``qualquer componente que necessita de ser gerido para fornecer serviços aos clientes'' e pode abranger elementos de software, hardware, serviços, processos ou pessoas \cite{itil4}. Definir, gerir e otimizar os \glspl{ci} e as suas dependências é o foco da \gls{cmdb}. O atributo de um \gls{ci} é essencialmente informação sobre este, tal como, preço, versão, nome ou número de série \cite{cmdbsystems}. Já o tipo de um \gls{ci} corresponde a ``uma categoria usada para classificar \glspl{ci}. Os tipos de \glspl{ci} identificam os atributos e relacionamentos desse registo''.

\section{ISO/IEC 20000}

A \textit{\acrfull{iso}} \cite{iso} é uma organização internacional de definição de \textit{standards} fundada em 1947 que já desenvolveu mais de 20000 \textit{standards} internacionais.

O ISO/IEC 20000 \cite{iso20000} é um \textit{standard} cujos processos estão alinhados com as práticas descritas na \gls{itil} \cite{itil4}. Define os requisitos de gestão dos serviços de \gls{ti} necessários para que as organizações prestem serviços de qualidade aos seus clientes.

O ISO/IEC 20000 possui 5 grupos de processos que garantem a qualidade da prestação dos serviços por parte das organizações \cite{marcelino2018visao}:
\begin{itemize}
    \item Conceção e transição de serviços novos ou alterados;
    \item Processos de entrega de serviços;
    \item Processos de relacionamento;
    \item Processos de resolução;
    \item Processos de controlo.
\end{itemize}

Incluído no grupo de processos de controlo, a gestão de configurações relata que, para cada serviço, devem ser identificados os \glspl{ci} relevantes, os seus atributos e os seus relacionamentos e dependências \cite{marcelino2018visao}. Neste contexto, são relevantes os conceitos \textit{\acrlong{ci}} e \textit{\acrlong{cmdb}}. \textit{\acrlong{ci}} é descrito pela ISO/IEC 20000 como um ``elemento que necessita de ser controlado para entregar serviços'' e \textit{\acrlong{cmdb}} é especificada como uma base de dados que ``guarda informação sobre os atributos dos \textit{configuration items} e dos relacionamentos entre estes, controlando os componentes durante o seu ciclo de vida'' \cite{iso20000}.

\section{Infraestrutura de TI}

Ao longo do tempo a infraestrutura tecnológica de uma organização tem vindo a tornar-se mais complexa para acompanhar o desenvolvimento das aplicações que, atualmente, requerem maior segurança, disponibilidade e escalabilidade.

O modelo de uma infraestrutura pode englobar vários conceitos dependendo do contexto da situação. No entanto, de uma forma generalizada, o modelo descrito em \cite{infrastructure} parece bastante adequado. Segundo este, a infraestrutura tecnológica de uma organização pode ser agrupada nas seguintes categorias:
\begin{itemize}
    \item dispositivos dos utilizadores finais;
    \item sistemas operativos;
    \item armazenamento;
    \item computadores;
    \item rede;
    \item centros de dados.
\end{itemize}

Os centros de dados são os locais que albergam a maior parte dos componentes de hardware da infraestrutura. Para além disto, fornecem os recursos necessários para que estas máquinas funcionem corretamente, tais como, energia, arrefecimento, sistemas de deteção e prevenção de fogos, entre outros \cite{infrastructure}.

\begin{wraptable}{r}{7cm}
\vspace{-1cm}
\caption{Camadas do modelo \gls{osi}.}
\scalebox{0.65}{
\begin{tabular}{|m{4cm}|m{6cm}|}
\hline
\hfil\textbf{Camada} & \hfil\textbf{OSI}     \\ \hline
\hfil7               & \hfil Aplicação        \\ \hline
\hfil6               & \hfil Apresentação     \\ \hline
\hfil5               & \hfil Sessão           \\ \hline
\hfil4               & \hfil Transporte       \\ \hline
\hfil3               & \hfil Rede             \\ \hline
\hfil2               & \hfil Ligação de Dados \\ \hline
\hfil1               & \hfil Física           \\ \hline
\end{tabular}}
\label{tab:osi}
\end{wraptable} 
A arquitetura de rede é baseada no modelo \gls{osi} e inclui componentes como routers, switches, firewalls, \glspl{wan}, \glspl{lan}, acesso à Internet, e \glspl{vpn} \cite{infrastructure}. O modelo \gls{osi} foi desenvolvido pela \textit{\acrlong{iso}} \cite{iso} no final dos anos 70 e definido no \textit{standard} ISO/IEC 7498 \cite{iso7498}. Na sua arquitetura estão definidas 7 camadas. 

As duas camadas mais relevantes neste contexto são a camada de rede e a camada de ligação de dados \cite{bearden2013network}.

A camada de rede é responsável por ter informação sobre a disposição da rede. A camada de rede utiliza um endereço lógico (\gls{ip}), que é atribuído aos computadores ou dispositivos de rede, para perceber onde este se encontra na rede. Usualmente são denominados dispositivos \textit{layer 3}, porque operam essencialmente na camada de rede \cite{bearden2013network}. Como um endereço \gls{ip} pode ser alterado, é necessário verificar se dois, ou mais, \glspl{ip} não pertencem ao mesmo dispositivo \citep{lin2019multi}. Os protocolos IPv4 e IPv6 e o seu \textit{routing} e endereçamento são implementações desta camada \cite{infrastructure}.

A camada de ligação de dados utiliza um endereço físico (\gls{mac}) para conduzir o tráfego na rede \cite{osimodel}. Este endereço, apesar de poder ser alterado na máquina, não é alterado tão frequentemente, nem automaticamente, como o endereço \gls{ip} \citep{lin2019multi}. Usualmente os dispositivos que operam essencialmente na camada de ligação de dados são denominados dispositivos \textit{layer 2} \cite{bearden2013network}. Alguns exemplos de implementações nesta camada são a Ethernet, Wi-Fi, switches e \glspl{wan} \cite{infrastructure}.

Os computadores localizados no centro de dados podem ser máquinas físicas ou virtuais. As máquinas físicas possuem fontes de energia, \glspl{cpu}, \gls{bios}, memória, portas, conectividade com a rede e, opcionalmente, periféricos.

Em relação ao armazenamento, os servidores/computadores podem utilizar armazenamento interno e/ou armazenamento externo. São exemplos os discos rígidos, \glspl{ssd}, \glspl{das}, \glspl{nas} e \glspl{san}.

Os sistemas operativos fornecem uma camada abstrata entre o hardware e o software \cite{infrastructure}. São um conjunto de programas que gerem o funcionamento interno do computador - memória, processos, \textit{file system}, periféricos - e controlam os programas deste \cite{owen2019operation}. Os sistemas operativos mais utilizados atualmente são Microsoft Windows, Linux, UNIX, iOS e Android.

Os utilizadores interagem com as aplicações através de dispositivos. As máquinas tipicmente utilizadas são portáteis, computadores, \textit{tablets}, telemóveis e impressoras.

\section{Configuration Management Database (CMDB)}

Nesta secção vão ser abordadas ideias e noções relativas ao conceito de \textit{\acrlong{cmdb}}.

\subsection{Conceito}

Uma \gls{cmdb} é uma base de dados utilizada por uma organização para guardar toda a informação relevante dos componentes da sua infraestrutura e relacionamentos entre estes. Deve conter informação sobre todos os elementos importantes do negócio, fornecendo uma vista completa da interação entre estes \cite{baron2010configuration}.

Este tipo de base de dados permite guardar informação sobre as alterações feitas na infraestrutura, percebendo qual o impacto dessas mudanças no sistema \cite{faihe2011configuration} \cite{cmdbsystems}. Desta forma, a utilização de uma \gls{cmdb} torna-se bastante importante porque permite uma melhor gestão dos componentes da organização. Assim, o propósito da \gls{cmdb} passa por promover a tomada de melhores decisões na organização. No entanto, é importante que os dados guardados na \gls{cmdb} sejam exatos, porque informação errada pode levar a más decisões e, consequentemente, à obtenção de maus resultados. \cite{cmdbsystems}.

Uma \gls{cmdb} deve, portanto, possuir diversas características, tais como:
\begin{itemize}
    \item identificar unicamente cada \gls{ci};
    \item guardar o estado da configuração do sistema;
    \item guardar todos os detalhes relevantes dos \glspl{ci} que fazem parte da infraestrutura da organização;
    \item descrever dependências e relacionamentos entre \glspl{ci};
    \item descrever os serviços oferecidos pelo sistema;
    \item servir de catálogo de serviços;
    \item servir de inventário dos \glspl{ci};
    \item guardar informação sobre as alterações feitas na infraestrutura.
\end{itemize}

\subsection{Vantagens}

Sendo uma base de dados que guarda informação sobre toda a infraestrutura, traz benefícios para quem a utilize. Assim, a implementação de uma \gls{cmdb} possui várias vantagens para uma organização, tais como \cite{implementingitil} \cite{cmdbsystems}:
\begin{itemize}
    \item permitir o controlo da infraestrutura tecnológica e do ciclo de vida dos componentes;
    \item permitir o controlo das alterações feitas no sistema;
    \item diminuir o tempo de resolução de problemas;
    \item visualizar a informação de cada componente individual da infraestrutura;
    \item prevenir erros de manutenção;
    \item diminuir custos, eliminando recursos redundantes ou desnecessários;
    \item gerir melhor a ocorrência de incidentes;
    \item avaliar antecipadamente potenciais riscos de mudanças;
    \item evidenciar vulnerabilidades representando as dependências entre os componentes;
    \item gerir mais facilmente infraestruturas mais complexas.
\end{itemize}

\subsection{O que guardar na CMDB}

Tendo em conta que os \glspl{ci} podem variar bastante em termos de complexidade, tamanho e tipo, no processo de construção da \gls{cmdb} devem ser tomadas decisões relativamente ao nível de detalhe de cada componente. Estas decisões devem ter em conta os objetivos da organização e os serviços que esta deve entregar aos seus clientes. Esta definição do nível de detalhe a guardar é bastante relevante, porque manter um grande volume de dados sobre os componentes e os seus relacionamentos pode ter custos bastante elevados \cite{itil4}. Também é necessário perceber que não é viável encontrar e documentar cada um dos componentes da infraestrutura. Não só é um trabalho exaustivo, como também é concetualmente impossível \cite{cmdbsystems}.

Assim, os dados a guardar na \gls{cmdb} podem ser definidos segundo três parâmetros: \textit{scope}, \textit{span} e \textit{granularity} \cite{implementingitil}.

O \textit{scope} é definido pelos tipos de objetos e relacionamentos que vão ser incluídos. Basicamente, de entre os tipos existentes de \glspl{ci} e relacionamentos, são escolhidos aqueles que são importantes para a organização. Esta escolha pode englobar um conjunto de componentes de alto nível, ou, caso seja relevante para a organização fazer \textit{tracking} de determinados itens, pode abranger um conjunto de elementos mais específico, ou seja, de mais baixo nível \cite{owen2019operation}. Por exemplo, pensando numa infraestrutura, pode ser fácil definir algumas categorias amplas tais como, hardware, software e documentos. Dentro da categoria hardware, de um modo mais específico, podemos incluir servidores e equipamentos de rede. Na categoria software podem ser definidos, por exemplo, sistemas operativos, aplicações e sistemas de gestão de bases de dados. Já os tipos de relacionamentos não são tão facilmente identificáveis, sendo, na maior parte dos casos, definidos tendo em conta os tipos de \glspl{ci} a ser identificados. Assim como existem alguns tipos que as organizações fazem questão de manter informação, podem existir outros que estas pretendam excluir, com o principal intuito de não incluir objetos desnecessários, de modo a diminuir os custos, não só da descoberta, como também de manutenção da \gls{cmdb} \cite{implementingitil}.

O \textit{span} indica, de entre os tipos de \glspl{ci} a ser descobertos, os grupos específicos a ser incluídos para cada um. Isto porque as organizações podem não querer identificar todos os \glspl{ci} de um determinado tipo, mas apenas alguns específicos desse tipo \cite{implementingitil}.

A \textit{granularity} determina o conjunto de atributos a descobrir sobre cada tipo de \gls{ci} podendo esta ser fixa ou variável para cada tipo de \gls{ci}. A granularidade fixa implica que todos os tipos de \Gls{ci} possuam o mesmo conjunto de atributos. Este conjunto deve ser definido de forma a abranger todos os tipos. Outro conjunto de atributos deve ser definido para todos os tipos de relacionamentos. Estes tipos representam aqueles que foram definidos no \textit{scope}. A vantagem de utilizar um conjunto fixo é a simplificação da recolha dos dados. No entanto, se os \gls{ci} não se adaptarem ao modelo, é necessário tomar uma decisão diferente. Uma solução possível passa por atribuir opcionalidade aos atributos. Para além disto, existem algumas variações que tentam atingir alguns benefícios da granularidade variável. Por exemplo, é possível definir atributos que podem ter valores diferentes dependendo da categoria do \gls{ci}. No entanto, para analisar estes atributos, que usualmente possuem nomes genéricos, é necessário perceber o mapeamento destes campos para as diferentes categorias. A granularidade variável permite definir um conjunto de atributos para cada tipo de \gls{ci} e de relacionamento, mas esta maior complexidade na definição dos atributos implica um maior custo na recolha dos dados \cite{implementingitil}.

Assim, de forma a definir o \textit{scope}, \textit{span} e \textit{granularity} da \gls{cmdb}, é necessário perceber todos os tipos de \glspl{ci}, atributos e relacionamentos que existem e que são passíveis de ser descobertos, assim como perceber a forma como estes se relacionam entre si \cite{kyurkchievlogical}.

\subsection{Ferramentas}

Atualmente, existem várias empresas no mercado que possuem ferramentas que implementam \glspl{cmdb}. Neste capítulo o objetivo é fazer uma análise de algumas características de algumas das soluções existentes no mercado e, no final, ser capaz de fazer uma comparação destas segundo alguns fatores.

\subsubsection{\textbf{i-doit}}
 
    O i-doit \cite{idoit} é uma ferramenta \textit{open source} que implementa uma \gls{cmdb} com uma interface gráfica. Segue as normas da \gls{itil}, e permite fazer a gestão dos componentes tecnológicos da organização. 
    
    Relativamente ao modelo de dados do sistema, existe uma hierarquia definida entre diversos tipos de dados. Tipos de grupos de objetos compreendem tipos de objetos; tipos de objetos herdam categorias; tipos de objetos instanciam objetos, que herdam as categorias do seu tipo de objeto; e categorias incluem atributos \cite{idoitkb}. 
    
    Além disto, o i-doit possui também vários relacionamentos definidos, que podem ser ajustados e modificados. Cada relacionamento é um objeto do tipo \textit{relation}. Um relacionamento estabelece um dos objetos como \textit{master} e outro como \textit{slave} sendo que o segundo está dependente do primeiro. 
    
    O i-doit permite também a criação de novos tipos de objetos, atributos e relacionamentos.
    
    O estado de vida de um componente é documentado na \gls{cmdb} e é guardado como um atributo de um objeto. Existem estados já definidos, mas é também possível definir outros estados \cite{idoitkb}.
    
    O i-doit também permite acesso externo através de uma \gls{api}. Esta \gls{api} oferece funcionalidades semelhantes às oferecidas pela interface gráfica, com a vantagem de poderem ser automatizadas. Através desta \gls{api} é possível fazer pedidos ao servidor de forma a executar determinados métodos. Esta comunicação é baseada no protocolo JSON-RPC, juntamente com o protocolo \gls{http} e \gls{json} como formato de troca. Um pedido é enviado através de um pedido \gls{http} POST para o servidor no formato \gls{json}. A resposta é também recebida neste formato \cite{idoitkb}.

\subsubsection{\textbf{ServiceNow CMDB}}

    A solução proposta pela ServiceNow \cite{servicenow} consiste numa \gls{cmdb} que permite a gestão do sistema e a visualização completa da infraestrutura da organização.
    
    O modelo de dados da \gls{cmdb} consiste num conjunto de tabelas ligadas que contêm todos os ativos e serviços controlados pela organização, assim como as suas configurações. As tabelas podem ser estendidas para outras tabelas, atribuindo uma hierarquia de classificação aos vários \glspl{ci}. É então possível ter tipos de \glspl{ci} que descendem de outros tipos na hierarquia. Todos os \glspl{ci} no sistema têm um tipo (classe). 
    
    Os atributos são aplicados aos \glspl{ci} de acordo com a sua classificação, e um \gls{ci} partilha os seus atributos com aqueles que se encontram abaixo na hierarquia. Estes atributos são guardados na tabela do objeto \cite{servicenowdoc}.
    
    Também os relacionamentos são armazenados em tabelas. Um relacionamento nesta \gls{cmdb} consistem em dois \glspl{ci} e um tipo de relacionamento que relaciona esses componentes.
    
    O estado de vida de um \gls{ci} é guardado como um campo na sua tabela. Um \gls{ci} pode ter apenas um estado operacional associado num determinado momento. Existe um conjunto de estados já definidos, mas esta lista pode ser alterada e podem ser definidos os estados de vida dos \glspl{ci} mais relevantes para a organização.
    
    É possível utilizar interfaces \gls{rest} para aceder aos dados na \gls{cmdb}. Existem várias \glspl{api} definidas que utilizam o protocolo \gls{http}. Os formatos de troca utilizados nos pedidos e respostas são \gls{xml} e \gls{json} \cite{servicenowdoc}.
    
\subsubsection{\textbf{BMC Atrium CMDB}}
    
    O modelo de dados desta \gls{cmdb} consiste num conjunto de classes que representam os vários tipos de \glspl{ci} e relacionamentos. Cada uma destas classes possui diferentes tipos de \glspl{ci} e um conjunto de atributos estabelecidos. As classes também podem ser herdadas e, tendo em conta a hierarquia definida, um \gls{ci} possui os seus atributos e das classes superiores \cite{bmcatrium}.
    
    Um relacionamento possui uma classe que define o tipo deste entre duas classes específicas de \glspl{ci}.
    
    O estado de vida de um componente está também documentado na \gls{cmdb} como um atributo da classe.
    
    A BMC Atrium CMDB \cite{bmcatrium} possui uma \gls{api} \gls{rest} definida que utiliza o protocolo \gls{http} e o formato \gls{json} para a troca informação.
    
\subsubsection{\textbf{iTop}}
    
    iTop \cite{itop} é uma solução \textit{open source} que permite que os \glspl{ci} e os seus relacionamentos sejam geridos numa \gls{cmdb}. 
    
    Existem várias classes definidas para os objetos da \gls{cmdb} que estão agrupadas por módulos. Estes podem conter grupos que contêm conjuntos de classes, ou, simplesmente, conter um conjunto de classes. Os atributos de cada objeto são atribuídos dependendo da sua classe. O tipo de relacionamentos que existem para um objeto varia dependendo da sua classe.
    
    Dependendo dos tipos de objetos, existem diferentes estados de vida que podem ser associados. O estado de vida é guardado como um atributo do objeto \cite{itopdocumentation}.
    
    Possui uma interface \gls{rest} que permite uma interação remota com a \gls{cmdb}. Esta interface utiliza o protocolo \gls{http} e o formato \gls{json} para a troca de informação \cite{itopdocumentation}.
    
%\subsubsection{\textbf{IBM Tivoli CCMDB}}

%    A solução da IBM inclui a descoberta automática da infraestrutura da empresa, através do Tivoli Application Dependency Discovery (TADDM). A camada de dados da \gls{cmdb} contém três espaços distintos que guardam os \glspl{ci} e relacionamentos, separando aqueles que foram descobertos, os que realmente foram considerados \glspl{ci} e aqueles que foram considerados como autorizados, isto é, versões menores dos atuais que a organização pretende manter controlo.
    
%    A CCMDB \cite{ibm} utiliza um modelo de dados que representa as classes de objetos e os seus relacionamentos. Os atributos são agrupados de acordo com as classes e podem ser partilhados entre classes. Os atributos podem também ser agrupados numa interface que pode ser incluída numa classe. As interfaces podem também ser derivadas de outras interfaces, atribuindo uma hierarquia a estas. Os relacionamentos entre os \glspl{ci} são tipos de classes, e podem também ser vistos como tabelas.
    
%    Existem várias \gls{api} (Java, SOAP, REST e CLI) definidas que permitem aceder aos dados da \gls{cmdb}. Os métodos da \gls{cmdb} \gls{api} retornam em formato XML e da \gls{rest} \gls{api} retornam em JSON.

\subsection{Comparação das ferramentas}

\renewcommand{\arraystretch}{2}

Apesar de estas ferramentas serem diferentes entre si, apresentam bastantes características em comum, tal como pode ser visualizado na tabela \ref{tab:ferramentascmdb}. O facto de todas terem por base as normas da \gls{itil} faz com que os esquemas de dados utilizados que, apesar de apresentarem diferenças, são bastante semelhantes e permitem definir as entidades necessárias. Para além disto, as quatro ferramentas analisadas permitem também o acesso à \gls{cmdb} através de \glspl{api}.

% Please add the following required packages to your document preamble:
% \usepackage{multirow}
% \usepackage{longtable}
% Note: It may be necessary to compile the document several times to get a multi-page table to line up properly
\fontsize{8}{8}\selectfont 
\begin{longtable}[c]{|m{2.2cm}|m{2.2cm}|m{2cm}|m{2cm}|m{2cm}|m{2cm}|}
\caption{Comparação de características das ferramentas que implementam CMDBs.}
\label{tab:ferramentascmdb}\\
\hline
 & \textbf{Características} & \textbf{i-doit} & \textbf{ServiceNow CMDB} & \textbf{BMC Atrium CMDB} & \textbf{iTop} \\ \hline
\endfirsthead
%
\endhead
%
\multirow{3}{*}{\textbf{CIs}} & Tipo & Tipo de \newline objeto & Classe & Tipo & Classe \\ \cline{2-6} 
 & Estado & Atributo & Campo & Atributo & Atributo \\ \cline{2-6} 
 & Agrupados & Grupo de \newline objetos & Tabelas \newline estendidas & Herança de \newline classes & Grupo/Módulo \\ \hline
\multirow{2}{*}{\textbf{Atributos}} & Agrupados & Categoria & Classificação & --- & --- \\ \cline{2-6} 
 & Herança & Permite & Permite & Permite & Não permite \\ \hline
\multirow{2}{*}{\textbf{Relacionamentos}} & Representação & Objeto & Tabela & Classe & Classe \\ \cline{2-6} 
 & Restrição do tipo de CIs & Não apresenta & Não apresenta & Apresenta & Não apresenta \\ \hline
\multirow{6}{*}{\textbf{APIs}} & Protocolo & \gls{http} & \gls{http} & \gls{http} & \gls{http} \\ \cline{2-6} 
 & Formato & \gls{json} & \gls{xml}\newline \gls{json} & \gls{json} & \gls{json} \\ \cline{2-6} 

 
 & Criar CI & Possível & Possível & Possível & Possível \\ \cline{2-6} 
 & Ler CI(s) & Possível & Possível & Possível & Possível \\ \cline{2-6} 
 & Editar CI & Possível & Possível & Possível & Possível \\ \cline{2-6} 
 & Eliminar CI & Possível & Possível & Possível & Possível \\ 
 \hline
\end{longtable}

\fontsize{11}{11}\selectfont 

\section{Descoberta Automática}

De modo a fazer a criação automática da \gls{cmdb}, é necessário descobrir os \glspl{ci} e relacionamentos entre estes que existem na infraestrutura. Inicialmente, faz sentido obter informação ao nível da rede, e de seguida obter informação específica sobre as máquinas descobertas \cite{taddm}.

A descoberta da infraestrutura da rede envolve a recolha de dados dos vários dispositivos que existem nessa rede. Cada dispositivo possui um conjunto de informação que o caracteriza, e é necessário descobrir essa informação. Assim, o objetivo passa por descobrir informação sobre a rede, sobre os dispositivos na rede e sobre as ligações entre estes, para, posteriormente, guardar esta informação na \gls{cmdb}. 

%Para isto, ́e necess ́ario perceber o que ́e supor-tado por cada dispositivo. Uma forma de obteresta informac ̧ ̃ao ́e percebendo como funciona omodelo OSI. 

Tendo em conta que nem todos os dispositivos implementam todas as camadas do modelo \gls{osi}, é necessário perceber qual o melhor método ou protocolo a adotar na sua descoberta \cite{osimodel}.

Atualmente, existem diversas ferramentas no mercado que implementam diversos métodos relacionados com a descoberta de componentes numa infraestrutura de rede. No entanto, a utilização de um único método de descoberta não é suficiente, porque várias ferramentas descobrem conjuntos diferentes de informação \citep{taddm}. É então necessário perceber como funcionam, que protocolos e métodos utilizam e que tipo de dados é possível obter através destas ferramentas. 

Um exemplo passa por recorrer ao protocolo \gls{icmp}, que, para além de permitir descobrir os endereços \gls{ip} das máquinas ativas na rede, permite também, através do comando \textit{traceroute}, descobrir o caminho ente dois nodos \cite{bearden2013network}. Desta forma é possível perceber como estão conectados os vários dispositivos de rede da infraestrutura. Como necessita do endereço \gls{ip}, é apenas suportado por dispositivos que implementem a camada 3 do modelo \gls{osi}.

Outro método para descobrir informação sobre a rede passa por analisar as tabelas de \textit{routing}, que contêm informação sobre a topologia da rede. Estas estão guardadas em dispositivos de rede, como por exemplo, \textit{routers}. Fornecem informação referente aos endereços associados ao dispositivo; as sub-redes a que estes se encontram diretamente conetados; o conjunto de endereços utilizado pelos dispositivos na sua vizinhança; e a explicação de como os pacotes devem ser encaminhados na rede \cite{bearden2013network}. A partir da análise desta informação é possível descobrir a topologia dos dispositivos \textit{layer 3} na rede.

Outro recurso que pode ser utilizado para obter informação sobre a rede é a tabela \gls{fdb}. Esta tabela é utilizada por dispositivos \textit{Layer 2} \cite{bearden2013network} e mapeia os endereços \gls{mac} que foram descobertos nas portas em que foram descobertos. Usualmente os \textit{switches} são descobertos através da tabela \gls{fdb}, porque estes não reconhecem \gls{ip}. 

Para além destes, existe também o protocolo \gls{lldp} que, ao nível da \textit{Layer 2}, facilita a troca de informação entre dispositivos conetados. É utilizado pelos dispositivos de rede para anunciarem a sua identidade, capacidades e os seus vizinhos mais próximos numa LAN \cite{das2017link}. A informação sobre os dispositivos é armazenada em \glspl{mib}, que são conjuntos organizados de informação que podem ser acedidos via \gls{snmp} \cite{8934069}.

Também o protocolo \gls{stp} permite obter informação sobre a topologia da rede \citep{tabbara2014method}. Este protocolo constrói uma \textit{spanning tree} que caracteriza o relacionamento entre os nodos da rede, conectada com \textit{bridges Layer 2}. Para obter a topologia da rede na camada 2, é necessário analisar os dados da \textit{spanning tree} de cada \textit{bridge}, usando, por exemplo, o protocolo \gls{snmp} \cite{bearden2013network}.

Após determinar quais as máquinas que existem na rede, é possível explorar esses dispositivos e obter informação sobre os mesmos \citep{singer2004system}. Apesar de toda a informação que é possível obter através dos métodos descritos anteriormente, estes não permitem a descoberta de informação detalhada e completa sobre os mesmos. Isto, porque aceder a determinada informação requer credenciais de acesso, de forma a não comprometer os sistemas. Para além disto, o tipo de \gls{ci} descoberto pode influenciar a forma como este é explorado. Por exemplo, dependendo do sistema operativo e da versão deste devem ser executadas tarefas diferentes para obter informação detalhada da máquina \cite{taddm}.

Atualmente existem diferentes métodos que permitem explorar diferentes máquinas. 

É o caso do protocolo \gls{snmp}, que permite aceder aos dados armazenados nas \glspl{mib} \cite{bearden2013network}. Utiliza pedidos \gls{udp} para aceder à informação guardada nestas bases de dados \citep{tabbara2014method}, mas necessita de credenciais para aceder a esta (utiliza uma \textit{community string} nas versões 1 e 2, mas na versão 3 requer uma autenticação do tipo \textit{username/password}). Esta informação é tratada na forma de variáveis e descreve o estado do sistema e a sua configuração. Existem pedidos definidos exclusivamente para obter informação sobre os dispositivos:
\begin{itemize}
    \item \textbf{\textit{GetRequest}:} pedido feito para obter o valor de uma variável ou de uma lista de variáveis;
    \item \textbf{\textit{GetNextRequest}:} tem como objetivo descobrir as variáveis existentes e os seus valores, sendo possível percorrer toda a \gls{mib};
    \item \textbf{\textit{GetBulkRequest}:} pedido de múltiplas iterações de \textit{GetNextRequest}.
\end{itemize}

Atualmente, o \gls{snmp} permite a gestão de vários dispositivos, tais como \textit{routers}, \textit{switches}, servidores, impressoras, \textit{workstations}, entre outros. 

No entanto, este protocolo também apresenta algumas desvantagens. Este está sujeito a ataques, que podem prejudicar os utilizadores; está suscetível à perda de informação devido à utilização do protocolo \gls{udp}; e implica a transferência de grandes quantidades de dados entre máquinas \cite{8934069}.

O protocolo \gls{ssh} permite estabelecer uma conexão com um sistema Unix. A partir deste tipo de conexão é possível ter acesso à máquina e obter informação mais específica sobre a mesma \cite{owen2019operation}. No caso de sistemas Windows, pode ser utilizado o \gls{wmi}. Este permite a gestão e acesso de dados em sistemas Windows. Permite também que este acesso seja feito de forma remota recorrendo ao \gls{winrm}.

\subsection{Ferramentas de descoberta}

Existem atualmente ferramentas desenvolvidas que utilizam alguns dos métodos descritos anteriormente para fazer a descoberta e/ou exploração dos componentes da rede.

Um exemplo de uma ferramenta deste género é o Nmap (\textit{Network Mapper}) \cite{nmap}. O Nmap é uma ferramenta \textit{open source} utilizada para a exploração e inventário da rede. Esta não necessita das credenciais de acesso de cada máquina para efetuar a descoberta destas na rede \cite{owen2019operation}. Possui diversas funcionalidades e utilidades, tais como \cite{hwang2019effective}:

\begin{itemize}
    \item deteção de \textit{hosts} ativos na rede;
    \item exploração das portas abertas, fechadas, filtradas e não-filtradas na máquina;
    \item deteção de serviços (protocolos utilizados, nome da aplicação e versão) a correr nas portas;
    \item deteção de sistemas operativos e respetivas versões;
    \item deteção do nome e tipo do dispositivo;
    \item identificação dos endereços \gls{ip} e \gls{mac}.
\end{itemize}

O Nmap permite fazer scan de uma rede inteira ou de apenas um \textit{host}. O mais usual é, antes de obter informação sobre a máquina, ser verificado, através do endereço \gls{ip}, se esta se encontra ativa. Em muitas redes, apenas uma pequena percentagem dos endereços \gls{ip} estão ativos num determinado momento \cite{nmap}. 

Outra ferramenta existente é o Spacewalk \cite{spacewalk}. É uma solução \textit{open source} que permite fazer o inventário de sistemas (hardware e software) Linux (Red Hat Enterprise Linux, Fedora, CentOS e Solaris). Possui uma \gls{api} XML-RPC \cite{spacewalkapi} que permite pesquisar pela informação do inventário.

O Spiceworks \cite{spiceworks} é outro exemplo que se enquadra neste contexto. Possui uma ferramenta de inventário que descobre automaticamente informação sobre os dispositivos na rede. Executa a exploração da rede e descobre as máquinas na rede, como servidores, routers, switches ou impressoras. Utiliza os protocolos \gls{ssh} para explorar sistemas Unix, \gls{wmi} para explorar sistemas Windows, e \gls{snmp} para explorar dispositivos \textit{layer 2}. Possui uma \gls{api} definida \cite{spiceworksapi} que retorna objetos \gls{json} com a informação requerida.

O NetXMS \cite{netxms} é outra ferramenta \textit{open-source} de monitorização e gestão de redes e infraestruturas. Esta ferramenta é capaz de fazer a descoberta da rede automaticamente. Neste processo, são utilizadas as tabelas \gls{arp} e de \textit{routing} e os protocolos \gls{icmp} e \gls{snmp} para obter informação sobre os componentes.

\subsection{Processamento dos Dados Recolhidos}

Depois da descoberta dos \glspl{ci} e dos seus relacionamentos, é necessário filtrar e normalizar esta informação para, posteriormente, criar os objetos na \gls{cmdb}.

Depois de obter os resultados da descoberta, é necessário executar um conjunto de tarefas para tornar esta informação utilizável:
\begin{itemize}
    \item eliminar os dados desnecessários;
    \item estruturar os dados com base nas classes de \glspl{ci} definidas;
    \item mapear os dados estruturados para as estruturas da \gls{cmdb} correspondentes;
    \item garantir que os dados estão formatados corretamente;
    \item verificar se não existem incoerências e erros nos dados;
    \item armazenar a informação na \gls{cmdb}.
\end{itemize}

A programação necessária para executar estas tarefas pode ser implementada recorrendo a linguagens de programação ou de \textit{scripting}, tais como, C, C++, Java, JavaScript, entre outras \cite{lin2019multi}.

\section{Modelo de Dados}

Após efetuada a descoberta de todos os \glspl{ci} e os seus relacionamentos, é necessário armazenar toda esta informação de uma forma estruturada. As opções mais comuns passam por utilizar um esquema de dados personalizado, ou utilizar um já existente. A principal vantagem de utilizar um esquema personalizado recai na possibilidade de personalização dos tipos e dependências convenientes de acordo com o contexto \cite{taddm}. Por outro lado, utilizar um esquema já existente permite tirar partido de algo que é atualmente adotado por diversas entidades, e que já foi validado por estas.

Neste contexto existe o \gls{cim}, que é um \textit{standard} que foi definido pela \gls{dmtf} \cite{cmdbsystems} e define uma forma de representar os elementos de um ambiente tecnológico como um conjunto de objetos e relacionamentos entre si. O seu objetivo é, através da semântica definida, obter um modelo único para informações de gestão e serviços \cite{cimoverview}. Este \textit{standard} inclui um esquema concetual e a sua especificação. Este modelo está organizado seguindo uma abordagem orientada a objetos, sendo definido um conjunto detalhado de classes que descrevem os elementos do ambiente. Neste modelo os componentes são modelados como classes, o estado dos componentes como propriedades, o seu comportamento como métodos da classe e os relacionamentos entre componentes são representados por associações \cite{cim}. Sendo baseado em \gls{uml}, promove herança, abstração, encapsulamento e relacionamentos para melhorar a qualidade e consistência da informação \cite{cimoverview}. Uma das vantagens deste modelo é o facto de este poder ser estendido. Para além disto, foi projetado para ser independente de tecnologias \cite{cimoverview}. 

Um modelo de informação consistente é um componente básico necessário para a integração e utilização dos dados dos ambientes tecnológicos de uma organização. Assim, com o \gls{cim}, esta informação tem significado e é consistente entre fornecedores e produtos \cite{cimoverview}.

%\subsection{Mapeamento dos modelos}

\section{Trabalho Relacionado}

Atualmente, já existem algumas ferramentas que permitem fazer a descoberta automática da infraestrutura para fazer a criação da \gls{cmdb}. É o caso do ServiceNow Discovery \cite{servicenowdiscovery} e do \gls{taddm} \cite{taddmsite}. O ServiceNow Discovery é integrado essencialmente com a ServiceNow CMDB, e o \gls{taddm} só é integrado com os produtos da IBM Tivoli.

O ServiceNow Discovery executa um conjunto de etapas que permite fazer a descoberta da infraestrutura tecnológica \cite{owen2019operation}:
\begin{itemize}
    \item \textbf{\textit{Scan:}} executa pedidos para descobrir que portas se encontram abertas nas máquinas e descobrir alguma informação entre estas;
    \item \textbf{Classificação:} sabendo o tipo do dispositivo, executa pedidos específicos para o explorar;
    \item \textbf{Identificação:} tenta obter mais informação sobre o dispositivo e determina se este já se encontra na \gls{cmdb}, fazendo a reconciliação da informação atualizando ou criando o \gls{ci};
    \item \textbf{Exploração:} obtém mais informação sobre o dispositivo como aplicações a correr, e outros atributos.
\end{itemize}

Para obter informação sobre as máquinas utiliza alguns métodos de descoberta, tais como:
\begin{itemize}
    \item \textbf{\gls{ssh}:} para se conectar a uma máquina Unix ou Linux e executar comandos para recolher informação;
    \item \textbf{\gls{snmp}:} para recolher informação sobre um \textit{switch} ou uma impressora;
    \item \textbf{\gls{wmi}, PowerShell e \gls{winrm}:} para recolher informação sobre máquinas Windows.
\end{itemize}

Esta ferramenta permite descobrir \glspl{ci}, tais como:
\begin{itemize}
    \item sistemas e \textit{workstations} Windows;
    \item sistemas Unix (Solaris, AIX, HP-UX, Mac OS);
    \item sistemas Linux;
    \item dispositivos de rede (switches, routers);
    \item impressoras;
    \item relacionamentos entre processos a correr e servidores.
\end{itemize}

Possui uma \gls{api} JavaScript definida que, quando ativado o \textit{plugin} associado, permite aceder a alguns dados acerca de um \gls{ci} descoberto num determinado endereço \gls{ip}. Esta \gls{api} devolve a informação em formato \gls{json}. É possível utilizar o ServiceNow Discovery como forma de povoar a ServiceNow CMDB.


%https://www.servicenow.com/content/dam/servicenow-assets/public/en-us/doc-type/resource-center/data-sheet/ds-discovery.pdf

%Storage components are discovered via SMI-S and CIM. RESTful APIs are used to discover cloud and container environments. Discovered information is securely sent back to an associated ServiceNow instance for processing by the probe’s matching sensors.

%https://docs.servicenow.com/bundle/istanbul-it-operations-management/page/product/discovery/concept/c_GetStartedWithDiscovery.html

A descoberta efetuada pelo \gls{taddm} recolhe informação sobre a infraestrutura , identificando componentes de software e de hardware. O objetivo desta descoberta é identificar os \glspl{ci}, criar o modelo dos objetos e persistir os dados na base de dados.

Alguns dos métodos de descoberta utilizados pelo \gls{taddm} são:
\begin{itemize}
    \item \textbf{\gls{cdp}};
    \item \textbf{\gls{jmx}};
    \item \textbf{\gls{ssh}};
    \item \textbf{\gls{snmp}};
    \item \textbf{\gls{sql}}.
\end{itemize}

Esta ferramenta permite descobrir \glspl{ci}, tais como:
\begin{itemize}
    \item dispositivos de rede (routers, switches, \textit{load balancers}, firewalls);
    \item sistemas (\textit{hosts}, discos, servidores de bases de dados, \textit{clusters}, \textit{load balancers});
    \item aplicações (servidores personalizados, servidores Java2 Platform Enterprise Edition, módulos e componentes Java2 Platform Enterprise Edition e Java Platform Standard Edition, servidores web, bases de dados);
    \item serviços da infraestrutura (\gls{dns}, \gls{nfs}, \gls{ldap});
    \item relacionamentos (conectividade na camada 3, conectividade na camada 2, dependências entre serviços, dependências em aplicações).
\end{itemize}

%https://docs.servicenow.com/bundle/istanbul-it-operations-management/page/product/discovery/reference/r_WhatDiscoveryCanDiscover.html

% --------------- Problema e Desafios ---------------
\chapter{Problema e Desafios}

\section{Problema}


\section{Desafios}

	No entanto, este processo de descoberta pode trazer alguns desafios, tais como:
\begin{itemize}
    \item dificuldades no processo de implementação;
    \item problemas de segurança;
    \item dificuldades na descoberta de determinados tipos de informação;
    \item dificuldades na integração das ferramentas com a \gls{cmdb}.
\end{itemize}


\section{Abordagem Proposta}
	         

\iffalse

\chapter{Trabalho Futuro}

Com base nos tópicos analisados nos capítulos anteriores, é proposto, para as próximas etapas, o desenvolvimento de uma ferramenta capaz de fazer a descoberta dos componentes da infraestrutura; fazer o tratamento dos dados descobertos para os guardar num modelo de dados genérico; conciliar a informação armazenada com o modelo de dados de uma \gls{cmdb}; introduzir os dados na \gls{cmdb} escolhida.

Para além disto, deve permitir também o contacto com o utilizador. Deve ser capaz de permitir que o utilizador introduza informação que auxilie a ferramenta (endereços da rede a descobrir, credenciais de acesso, tipo de \gls{cmdb} a ser utilizada) durante o processo. Deve também apresentar o estado do processo, os dados recolhidos no processo e eventuais erros que possam ocorrer.

\newpage
\chapter{ignore}

	\section{Basics/Background/Related work}
	Example of a citation where the author should be cited directly on the text like, the work of \cite{GRM97}, on producing \LaTeX files with \Bibtex\ references. \\
	Another way of citing whithout a direct mention to the author can used like the work done on C language \cite{KeR88}.

     \section{Summary}
     	\subsection{Conceptual map (Optional)}
	You may wish to use the \conexp{Concept-Explorer} tool.
	
	\begin{wrapfigure}{r}{0.25\textwidth}	
		\includegraphics[width=0.2\textwidth]{img/mei-logo-03.jpg}
	\end{wrapfigure}
	Here we have how an image can be wrapped into the text without having surronding space, and takin advantage of the space to be disposed on the side, without breaking the text readability.

	This approach also benefits from the fact that the text will be related implicitly to the image on its side, although the it should be referenced on the text anyway, otherwise, it should be consulting to perceive to which paragraph the image is related to.

	Here is how we place an image as floating body.
	Take in attention that the image is displayed on the next page, because there's no more room in this page.
	\begin{figure}
	\begin{center}
		\includegraphics[width=0.5\textwidth]{img/mei-logo-03.jpg}
	\end{center}
	\caption{caption}
	\end{figure}

	
	% CHAPTER - Contribution -------------------------
	\chapter{Development}
		
	\section{Decisions}
    \section{Implementation}
    \section{Outcomes}
    Main result(s) and their scientific evidence
	\section{Summary}


	% CHAPTER - Application -------------------------
	\chapter{Case Studies / Experiments}
		Application of main result (examples and case studies)
	\section{Experiment setup}
    \section{Results}
    \section{Discussion}
	\section{Summary}

	% CHAPTER - Conclusion/Future Work --------------
	\chapter{Conclusion}
		Conclusions and future work.
	\section{Conclusions}
	\section{Prospect for future work}
	
\fi	
			
	\bookmarksetup{startatroot} % Ends last part.
	\addtocontents{toc}{\bigskip} % Making the table of contents look good.
	%\cleardoublepage

	%- Bibliography (needs bibtex) -%
	\bibliography{dissertation.bib}

	% Index of terms (needs  makeindex) -------------
	%\printindex
	
\iffalse
	
	% APPENDIX --------------------------------------
	\umappendix{Appendix}
	
	% Add appendix chapters
	\chapter{Support material}
	Auxiliary results which are not main-stream; or

	%\chapter{Details of results}
	Details of results whose length would compromise readability of main text; or

	%\chapter{Listings}
	Specifications and Code Listings: should this be the case; or

	%\chapter{Tooling}
	Tooling: Should this be the case.

	%Anyone using \Latex\ should consider having a look at \TUG,
	%the \tug{\TeX\ Users Group}

\fi

	% Back Cover -------------------------------------------
	\umbackcover{
	NB: place here information about funding, FCT project, etc in which the work is framed. Leave empty otherwise.
	}


\end{document}
